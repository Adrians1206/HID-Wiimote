/*

Copyright (C) 2015 Julian Löhr
All rights reserved.

Filename:
RawDevice.h

Abstract:
	Header file for RawDevice.c

*/

#ifndef _RAW_PDO_INTERFACE_H_
#define _RAW_PDO_INTERFACE_H_

#include "HIDWiimote.h"

#define HIDWIIMOTE_RAWPDO_DEVICE_ID L"{398128C0-7830-4B53-BA84-1E02F05EFFB0}\\HIDWiimote\0"

DEFINE_GUID(GUID_DEVCLASS_HIDWIIMOTE_RAWPDO, 0x9EB25BFC, 0xCB93, 0x4EA4, 0xB6, 0xA7, 0x66, 0xAC, 0x25, 0x5D, 0x02, 0x78); // {9EB25BFC-CB93-4EA4-B6A7-66AC255D0278}
DEFINE_GUID(GUID_DEVINTERFACE_HIDWIIMOTE, 0x8BDB1C6B, 0x0857, 0x4225, 0x86, 0xBE, 0x28, 0xD2, 0xFA, 0x9D, 0x15, 0xC6); // {8BDB1C6B-0857-4225-86BE-28D2FA9D15C6}

typedef struct _RAW_DEVICE_CONTEXT
{
	WDFDEVICE RawDevice;
	ULONG InstanceNumber;

	WDFQUEUE IncomingQueue;
	WDFQUEUE ForwardQueue;

} RAW_DEVICE_CONTEXT, *PRAW_DEVICE_CONTEXT;

WDF_DECLARE_CONTEXT_TYPE_WITH_NAME(RAW_DEVICE_CONTEXT, GetRawDeviceContext);
EVT_WDF_IO_QUEUE_IO_DEVICE_CONTROL RawPDODeviceControlCallback;

NTSTATUS CreateRawPDO(_In_ PDEVICE_CONTEXT DeviceContext);
NTSTATUS CreateRawPDOQueues(_In_ PDEVICE_CONTEXT DeviceContext);
NTSTATUS ReleaseRawPDO(_In_ PDEVICE_CONTEXT DeviceContext);


#endif